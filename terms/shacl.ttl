@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix smvg: <https://purl.org/smvg/> .
@prefix schema: <https://schema.org/> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix wd: <http://www.wikidata.org/entity/> .
@prefix ex: <http://example.org/shapes/> .


ex:VideoGameShape
  a sh:NodeShape ;
  sh:targetClass <https://schema.org/VideoGame> ;
  sh:property [
    sh:path dcterms:title ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
    sh:message "Each game must have a title (name)."
  ] ;
  sh:property [
    sh:path schema:datePublished ;
    sh:datatype xsd:date ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
    sh:message "Each game must have one release date (release_date) in the format YYYY-MM-DD."
  ] ;
  sh:property [ # TODO: Limitamos a 0-100? >0? Sem restrição?
    sh:path schema:ratingValue ;
    sh:datatype xsd:float ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
    sh:minInclusive 0.0 ;
    sh:maxInclusive 100.0 ;
    sh:message "rating_value must be a number (float) and not a list."
  ] ;
  sh:property [
    sh:path schema:ratingCount ;
    sh:datatype xsd:integer ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
    sh:minInclusive 0 ;
    sh:message "rating_count must be an integer >= 0 and not a list."
  ] ;
  sh:property [
    sh:path smvg:achievements ;
    sh:datatype xsd:integer ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
    sh:minInclusive 0 ;
    sh:message "achievements must be an integer >= 0 when present and not a list."
  ] ;
  sh:property [
    sh:path smvg:avg_playtime ;
    sh:datatype xsd:float ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
    sh:minInclusive 0.0 ;
    sh:message "average_playtime must be a float >= 0 when present and not a list."
  ] ;
  sh:property [
    sh:path smvg:median_playtime ;
    sh:datatype xsd:float ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
    sh:minInclusive 0.0 ;
    sh:message "median_playtime must be a float >= 0 when present and not a list."
  ] ;
  sh:property [
    sh:path smvg:owners ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
    sh:pattern "^[0-9]+-[0-9]+$" ;
    sh:message "owners must be a string (e.g. '10000000-20000000')."
  ] ;
  sh:property [
    sh:path schema:price ;
    sh:datatype xsd:float ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
    sh:minInclusive 0.0 ;
    sh:message "price must be a float >= 0 when present."
  ] ;
  sh:property [
    sh:path schema:requiredMinAge ;
    sh:datatype xsd:integer ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
    sh:minInclusive 0 ;
    sh:message "required_age must be an integer >= 0 when present."
  ] ;

  # properties that are lists of literals
  sh:property [
    sh:path schema:keywords ;
    sh:datatype xsd:string ;
    sh:minCount 0 ;
    sh:message "steamspy_tags/schema:keywords must be a string or a list of strings."
  ] ;
  sh:property [
    sh:path smvg:categories ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:message "categories must be a string or a list of strings."
  ] ;

  # properties that point to IRIs (wikidata etc.)
  sh:property [
    sh:path schema:creator ;
    sh:nodeKind sh:IRI ;
    sh:minCount 1 ;
    sh:message "developers must point to IRIs (e.g. wd:Q12345)."
  ] ;
  sh:property [
    sh:path schema:publisher ;
    sh:nodeKind sh:IRI ;
    sh:minCount 1 ;
    sh:message "publishers must point to IRIs when present."
  ] ;
  sh:property [
    sh:path schema:genre ;
    sh:nodeKind sh:IRI ;
    sh:minCount 1 ;
    sh:message "genres must point to IRIs when present."
  ] ;
  sh:property [
    sh:path schema:operatingSystem ; 
    sh:nodeKind sh:IRI ;
    sh:minCount 1 ;
    sh:message "platforms must point to IRIs when present."
  ] .
